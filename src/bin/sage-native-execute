#!/usr/bin/env bash

# sage_restore
#
# restores environment variable values previously saved by sage_export and
# removes the traces left by sage_export.
#
# see sage-env for sage_export
#
# AUTHORS: Nils Bruin, Thierry Monteil

sage_restore ()
{
    #apparently IFS is already magically a local variable  
    IFS=:
    for varname in $SAGE_ENVIRONMENT_VARIABLES; do
        local backup="SAGE_SAVED_${varname}"
        if [ -z ${!backup+x} ]; then
            unset "$varname"
        else
            export "$varname"="${!backup}"
        fi
        unset "$backup"
    done
    unset SAGE_ENVIRONMENT_VARIABLES
}

sage_restore
exec "$@"

