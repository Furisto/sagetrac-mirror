#!/bin/sh

# Reset paths to their previous value

LD_LIBRARY_PATH=$SAGE_ORIG_LD_LIBRARY_PATH; export LD_LIBRARY_PATH
if [ `uname` = 'Darwin' ]; then
  DYLD_LIBRARY_PATH=$SAGE_ORIG_DYLD_LIBRARY_PATH
fi

PATH=$SAGE_ORIG_PATH ; export PATH


# Unset variables possibly set by Sage, except proxies that are poisoned in
# sage-spkg only (and may contain important information otherwise).

VARIABLES_TO_UNSET='
AR
AS
CACHEGRIND_FLAGS
CALLGRIND_FLAGS
CALLRGIND_FLAGS
CC
CCACHE_BASEDIR
CHMOD
CP
CPATH
CPP
CXX
CXXFLAGS
DOT_SAGE
DYLD_LIBRARY_PATH
ECLDIR
F77
F90
F95
FC
GIT_EXEC_PATH
GIT_TEMPLATE_DIR
GP_DATA_DIR
GPDOCDIR
GPHELP
IPYTHONDIR
LC_ALL
LD
LDFLAGS
LD_LIBRARY_PATH
LIBRARY_PATH
LN
MACOSX_DEPLOYMENT_TARGET
MAKE
MASSIF_FLAGS
MAXIMA_PREFIX
MKDIR
MPLCONFIGDIR
MV
OBJC
OBJCXX
OMEGA_FLAGS
PATH
PS1
PYTHON_EGG_CACHE
PYTHONHOME
PYTHONPATH
PYTHONSTARTUP
RANLIB
__sage__
SAGE64
SAGE_BANNER
SAGE_BUILD_DIR
SAGE_CHECK
SAGE_DISTFILES
SAGE_DOC
SAGE_DOC_MATHJAX
SAGE_ENV_SOURCED
SAGE_ETC
SAGE_EXTCODE
SAGE_IMPORTALL
SAGE_KEEP_BUILT_SPKGS
SAGE_LOCAL
SAGE_LOGS
SAGE_NUM_THREADS
SAGE_NUM_THREADS_PARALLEL
SAGE_ORIG_DYLD_LIBRARY_PATH
SAGE_ORIG_DYLD_LIBRARY_PATH_SET
SAGE_ORIG_LD_LIBRARY_PATH
SAGE_ORIG_LD_LIBRARY_PATH_SET
SAGE_ORIG_PATH
SAGE_ORIG_PATH_SET
SAGE_REPO_ANONYMOUS
SAGE_REPO_AUTHENTICATED
SAGE_ROOT
SAGE_SCRIPTS_DIR
SAGE_SERVER
SAGE_SHARE
SAGE_SPKG_INST
SAGE_SRC
SAGE_STARTUP_FILE
SAGE_UPSTREAM
SINGULAR_EXECUTABLE
SINGULARPATH
TERMINFO
TOUCH
UNAME
ZDOTDIR
'

for VARIABLE in $VARIABLES_TO_UNSET ; do
    unset $VARIABLE
done


"$@"
