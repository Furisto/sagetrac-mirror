cd src/


if [ "$UNAME" = CYGWIN ]; then
    export BINARY_PATH="$SAGE_LOCAL/bin"
    export INCLUDE_PATH="$SAGE_LOCAL/include"
    export LIBRARY_PATH="$SAGE_LOCAL/lib"
    cp -f win32/Makefile.gcc Makefile

    if [ $? -ne 0 ]; then
        echo >&2 "Error copying over zlib's Makefile for Cygwin."
        exit 1
    fi

    # We want to install shared objects
    sed -i 's/SHARED_MODE=0/SHARED_MODE=1/' Makefile
else
    if [ "$SAGE64" = yes ]; then
        CONFIGUREFLAGS="--64 --shared --includedir="$SAGE_LOCAL/include""
    else
        CONFIGUREFLAGS="--shared --includedir="$SAGE_LOCAL/include""
    fi
fi

sdh_configure $CONFIGUREFLAGS
sdh_make
sdh_make_install
