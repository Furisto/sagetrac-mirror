#! /bin/sh
die () {
    echo "$@" 1>&2
    exit 1
}

[ -n "$SAGE_LOCAL" ] || die 'Error: $SAGE_LOCAL not set. Source sage-env or run this script from `sage -sh`.'

set -e

FORMAL_INEQS_REPO=https://github.com/monadius/formal_ineqs.git
FORMAL_INEQS_BRANCH=master
FORMAL_INEQS_COMMIT=169fefc758fd1e041047520dd4ba1f757f641f3b

FORMAL_INEQS_DIR="$SAGE_LOCAL/share/formal_ineqs"

if [ -d "$FORMAL_INEQS_DIR" ]; then
    (cd "$FORMAL_INEQS_DIR" && git fetch origin ${FORMAL_INEQS_BRANCH})
else
    cd "$SAGE_LOCAL/share/"
    git clone --branch=${FORMAL_INEQS_BRANCH} --single-branch $FORMAL_INEQS_REPO
fi
cd "$FORMAL_INEQS_DIR"
if [ -n "${FORMAL_INEQS_COMMIT}" ]; then
    git checkout ${FORMAL_INEQS_COMMIT}
else
    git pull --ff-only
fi
