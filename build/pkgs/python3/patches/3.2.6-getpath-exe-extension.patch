Fixes a known issue with sys.executable ambiguity on Cygwin.  This is a
simpler version of the patch found at http://bugs.python.org/issue28441

diff -ru a/Modules/getpath.c b/Modules/getpath.c
--- a/Modules/getpath.c	2018-06-27 05:07:35.000000000 +0200
+++ b/Modules/getpath.c	2018-06-28 09:31:51.330006570 +0200
@@ -592,6 +592,28 @@
                 break;
             }
 
+#ifdef __CYGWIN__
+            /*
+             * Cygwin automatically removes the ".exe" extension from argv[0]
+             * to make programs feel like they are in a more Unix-like
+             * environment.  Unfortunately, this can make it problemmatic for
+             * Cygwin to distinguish between a directory and an executable with
+             * the same name excluding the ".exe" extension.  For example, the
+             * Cygwin Python build directory has a "Python" directory and a
+             * "python.exe" executable.  This causes isxfile() to erroneously
+             * return false.  If isdir() returns true and there is enough space
+             * to append the ".exe" extension, then we try again with the
+             * extension appended.
+             */
+#define EXE ".exe"
+            if (isdir(progpath) && strlen(progpath) + strlen(EXE) <= MAXPATHLEN)
+            {
+                strcat(progpath, EXE);
+                if (isxfile(progpath))
+                    break;
+            }
+#endif /* __CYGWIN__ */
+
             if (!delim) {
                 program_full_path[0] = L'\0';
                 break;
